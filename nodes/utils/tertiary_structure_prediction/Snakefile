TOKEN = config["token"]

config["target_dir"] = config["pdb_dir"]
config["profile_dir"] = \
    config["target_dir"].replace("pdb", "profile")

wildcard_constraints:
    seq_name="Seq_\d+"

include:
    "setup/libs.smk"

include:
    "setup/blastdb.smk"

include:
    "setup/raptorx.smk"

include:
    "build_feature.smk"

include:
    "secondary_structure_prediction.smk"

include:
    "tertiary_structure_prediction.smk"

rule all:
    input:
         config["fasta_sec_out"],
         config["classes_sec_out"],
         config["profile_dir"],
         config["fasta_ter_out"],
         config["classes_ter_out"],
         config["pdb_dir"]

onsuccess:
    shell("rm -r peptidereactor/RaptorX/tmp/")
